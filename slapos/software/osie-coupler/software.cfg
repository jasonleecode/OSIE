# the default SlapOs profile which setup a modbus server instance usually over OSIE's coupler
[buildout]
extends =
  buildout.hash.cfg
  https://lab.nexedi.com/nexedi/slapos/raw/master/component/fluentd/buildout.cfg
  https://lab.nexedi.com/nexedi/slapos/raw/master/stack/slapos.cfg
  https://lab.nexedi.com/nexedi/slapos/raw/master/component/python3/buildout.cfg

parts = 
  osie-repository
  osie-coupler-egg
  osie-coupler-script

# fix for pypi: https://mail.python.org/pipermail/distutils-sig/2017-October/031712.html
index = https://pypi.python.org/simple/

[osie-repository]
recipe  = slapos.recipe.build:gitclone
git-executable = ${git:location}/bin/git
# token must be removed if going public!!!
repository = https://gitlab+deploy-token-4:pLwtBu8TbusqZDKPUpZA@lab.nexedi.com/nexedi/osie.git
location = ${buildout:parts-directory}/osie

[osie-coupler-egg]
recipe  = zc.recipe.egg:develop
egg     = osie-coupler
setup   = ${osie-repository:location}/eggs/osie_coupler/

[osie-coupler-script]
recipe  = zc.recipe.egg:scripts
eggs    = ${osie-coupler-egg:egg}
scripts = modbus_server=modbus_server-run
#interpreter = ${python-interpreter:interpreter}

[eggs]
eggs +=
  ${osie-coupler-egg:egg}
  setuptools
